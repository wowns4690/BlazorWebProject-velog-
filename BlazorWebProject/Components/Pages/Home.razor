@page "/"
@rendermode InteractiveServer
@using BlazorWebProject.Service
@using BlazorWebProject.Model
@using BlazorWebProject.Components
@inject ClientService service
@inject IJSRuntime JsRuntime
<PageTitle>Home</PageTitle>

@if(IsLoggedIn){
    <div class="mt-4">
        <EmployeeAdd OnEmployeeAdded="HandleEmployeeAdded" />
    </div>

    <div class="mt-4">
        <EmployeeList @ref="employeeList" />
    </div>
}
else{
    <div class="mt-4">
    <EmployeeLogin IsLoggedIn="LoggedIn" />
    </div>
}

@code {
    private bool IsLoggedIn { get; set; } = false;

    private EmployeeList employeeList = null!;

    private async Task HandleEmployeeAdded(EmployeeModel emp)
    {
        await employeeList.EmployeeListUpdate(emp);
    }

    private void LoggedIn(string status)
    {
        if (status.Equals("success"))
        {
            IsLoggedIn = true;
        }
    }

}